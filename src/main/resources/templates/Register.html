<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.thymeleaf.org ">
<!--th原本没有http://www.thymeleaf.org-->
<head>
  <meta charset="UTF-8">
  <base th:href="@{/static}">
  <link rel="stylesheet" href="../static/css/semantic.min.css" th:href="@{static/css/semantic.min.css}">
  <link rel="stylesheet" href="../static/css/me.css" th:href="@{static/css/me.css}">
  <title>NCU-CTF</title>
</head>
<body>

<nav>
  <div class="ui segment big-font-weight slight-background-opacity">
    <div class="ui grid">
      <div class="four wide column center aligned">
        <h2 class="ui header font-center-small m-padded-lr">NCU-CTF</h2>
      </div>
      <div class="eight wide column font-center-tiny">

        <a href="#" th:href="@{/challenges}" class="m-icon-big m-black m-padded-lr"><i class="clone icon"></i> 挑战</a>
        <a href="#" th:href="@{/solutions}" class="m-icon-big m-black m-padded-lr"><i class="pencil icon"></i> 题解</a>
        <a href="#" th:href="@{/rank}" class="m-icon-big m-black m-padded-lr"><i class="trophy icon"></i> 排行榜</a>
      </div>


      <!--用户登录信息-->
      <div class="four wide column right aligned font-center-small">
        <div class="ui dropdown user">
          <img class="ui avatar image" th:src="@{static/images/touxiang/touxiang2.jpg}"
               src="/static/images/touxiang/touxiang2.jpg">
          <span th:text="${user == null ? '请登录':user.getUsername()}">请登录</span>
          <i class="dropdown icon"></i>
          <div class="menu">
            <div class="item">
              <a href="#" th:href="@{/login}" class="item">登录</a>
            </div>
            <div class="item">
              <a href="#" th:href="@{/user/login}" class="item">个人信息</a>
            </div>
            <div class="item">
              <a href="#" th:href="@{/user/logout}" class="item">退出</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>

<div class="ui container center aligned m-margin-tb-big">
  <div class="ui row center aligned">
    <h1 class="ui huge header azure-color">Register</h1>
  </div>

  <div class="ui row center aligned m-margin-tb-big">
    <div class="ui m-container-small">
      <div class="ui middle aligned center aligned grid">
        <div class="column">
          <div class="ui segment">
<!--            `th:action="@{/user/register}"` 是Thymeleaf模板引擎中的表达式语法，用于指定HTML表单提交的目标URL。-->
<!--            `@{/user/register}` 是一个相对于当前URL的相对路径，用于指定表单提交时的目标URL。在这个例子中，`@{/user/register}` 指定了一个相对于当前URL的 "/user/register" 路径。-->
<!--            Thymeleaf将自动根据这个表达式为表单的 `action` 属性设置正确的目标URL。这个表达式使得你不需要硬编码具体的URL而可以保持相对路径，这样当部署到不同的环境时，URL会自动适应环境。-->
<!--            总之，`th:action="@{/user/register}"` 告诉Thymeleaf模板引擎将当前表单的提交目标设置为 "/user/register" 路径。-->
            <form class="ui large form" method="post" th:action="@{/user/register}">
              <div class="field">
                <div class="ui left icon input">
                  <i class="user icon"></i>
                  <input type="text" name="username" placeholder="用户名">
                </div>
              </div>

              <div class="field">
                <div class="ui left icon input">
                  <i class="lock icon"></i>
                  <input type="email" name="email" placeholder="邮箱">
                </div>
              </div>

              <div class="field">
                <div class="ui left icon input">
                  <i class="lock icon"></i>
                  <input type="text" name="phone" placeholder="电话号码">
                </div>
              </div>
              <div class="field">
                <div class="ui left icon input">
                  <i class="lock icon"></i>
                  <input type="password" name="password" placeholder="密码">
                </div>
              </div>
              <div class="field">
                <div class="ui left icon input">
                  <i class="lock icon"></i>
                  <input type="password" placeholder="请重复密码">
                </div>
              </div>


              <button class="ui fluid large teal submit button m-margin-tb-big">注册</button>

              <span>已有账号？<a class="m-black" href="#">点击这里登录</a></span>
              <div class="ui error mini message"></div>
              <div class="ui mini message" th:unless="${#strings.isEmpty(message)}">
                <span th:text="${message}">错误信息</span>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
<script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script>
<script type="text/javascript" src="../static/js/semantic.min.js" th:src="@{static/js/semantic.min.js}"></script>


<script>
  $('.ui.dropdown.user')
          .dropdown()
  ;


  //表单验证
  $('.ui.form').form({
    fields: {
      username: {
        identifier: 'username',
        rules: [{
          type: 'empty',
          prompt: " 请输入用户名"
        }]
      },
      password: {
        identifier: 'password',
        rules: [{
          type: 'empty',
          prompt: " 请输入密码"
        }]
      },
      email: {
        identifier: 'email',
        rules: [{
          type: 'empty',
          prompt: " 请输入邮箱"
        }]
      },
      phone: {
        identifier: 'phone',
        rules: [{
          type: 'empty',
          prompt: " 请输入电话号码"
        }]
      }
    }
  })

</script>
</html>